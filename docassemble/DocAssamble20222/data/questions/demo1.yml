modules:
  - .dastripe
  - .coupon_code
---
features:
  javascript: https://js.stripe.com/v3/
  popover trigger: click
  progress bar: True
  show progress bar percentage: True
  css: buttons.css

---

objects:
  - payment: DAStripe.using(payor=petitioner, currency='usd')
  - petitioner: Individual
  - coupon_code: DAList
---
id: interview order
mandatory: True
code: |
  draft_shown
  if check:
    coupon_page
  else:
    if not payment.paid:
      payment_screen
      final_shown
---

event: payment_screen
question: |
  You need to pay first.
---
code: |
  payment.amount = 50
---
question: |
  Do you have coupon?
subquestion: |
  In order to cover our development costs, we are initially charging $${payment.amount} per QDRO. If you are unhappy with your QDRO, we have a 100% satisfaction guarantee - just reach out within three months, give us a chance to make the QDRO right, and we'll give a full refund if the QDRO can't be fixed.
post: |
  Can't afford the fee? Though we charge less than any other QDRO website out there, we've got your back. Please reach out to us via the contact form on [(Lexyalgo.com)](${ url_of('https://Lexyalgo.com/') }){:target="_blank"} and we'll provide a coupon code.
field: check
buttons:
  - Yes: True
  - Pay: False
---
event: payment.demand
question: |
  Payment
  ${ payment.html }
script: |
  ${ payment.javascript }

---

field: coupon_page
question: |
  Enter coupon code?
fields:
  - Coupon code: coupon_code
validation code: |
  if not check_coupon(coupon_code) == True:
    validation_error('Coupon code is not valid')

---
event: payment.success
code: |
  payment.process()

---

mandatory: True
question: |
  Download document for ** and **Addendum** attached below.

attachment code: |
  [the_document, addendum]

---


